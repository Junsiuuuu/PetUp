<!DOCTYPE html>
<html>

<head>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: transparent;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            overflow: hidden;

            /* ★ [수정 1] 기존의 drag 삭제하고 cursor 추가 */
            /* -webkit-app-region: drag;  <-- 이거 절대 있으면 안 됨! (지우세요) */
            cursor: grab;
            /* 손바닥 모양 커서 */
            user-select: none;
        }

        body:active {
            cursor: grabbing;
            /* 잡았을 때 쥐는 모양 */
        }

        img {
            /* 펫 크기 꽉 차게 */
            width: 100%;
            height: 100%;
            object-fit: contain;
            -webkit-user-drag: none;
        }
    </style>
</head>

<body>
    <img id="pet-image" src="">

    <script>
        const { ipcRenderer } = require('electron');
        const img = document.getElementById('pet-image');

        ipcRenderer.on('update-image', (event, imagePath) => {
            img.src = imagePath;
        });

        // ★ [수정 2] 직접 드래그 신호 보내기 (이게 있어야 부드러움)
        const body = document.body;

        body.addEventListener('mousedown', (e) => {
            if (e.button === 0) { // 마우스 왼쪽 버튼 클릭 시
                ipcRenderer.send('drag-start');
            }
        });

        window.addEventListener('mouseup', () => {
            ipcRenderer.send('drag-end');
        });

        // [NEW] 펫 클릭 이벤트 (운세 등 상태 복구용)
        body.addEventListener('click', () => {
            ipcRenderer.send('pet-clicked');
        });
    </script>
</body>

</html>